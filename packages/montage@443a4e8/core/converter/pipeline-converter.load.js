montageDefine("443a4e8","core/converter/pipeline-converter",{dependencies:["./converter","core/promise"],factory:function(e,r,t){var n=e("./converter").Converter,o=e("core/promise").Promise;r.PipelineConverter=n.specialize({deserializeSelf:{value:function(e){var r;r=e.getProperty("converters"),void 0!==r&&(this.converters=r)}},serializeSelf:{value:function(e){this.converters.length>0&&e.setProperty("converters",this.converters)}},converters:{value:void 0},convert:{value:function(e){return this._convertWithConverterAtIndex(e,0)}},_convertWithConverterAtIndex:{value:function(e,r){var t,n=this,i=this.converters[r],v=i.convert(e),s=r===this.converters.length-1,c=this._isThenable(v);return r++,t=s?c?v:o.resolve(v):c?v.then(function(e){return n._convertWithConverterAtIndex(e,r)}):this._convertWithConverterAtIndex(v,r)}},_isThenable:{value:function(e){return!(!e||!e.then||"function"!=typeof e.then)}},revert:{value:function(e){return this._revertWithConverterAtIndex(e,this.converters.length-1)}},_revertWithConverterAtIndex:{value:function(e,r){var t,n=this,i=this.converters[r],v=i.revert(e),s=0===r,c=this._isThenable(v);return r--,t=s?c?v:o.resolve(v):c?v.then(function(e){return n._revertWithConverterAtIndex(e,r)}):this._revertWithConverterAtIndex(v,r)}}})}});