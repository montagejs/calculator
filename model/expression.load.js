montageDefine("3c1872a","model/expression",{dependencies:["montage"],factory:function(t,s,i){var e=t("montage").Montage,h=s.Expression=e.specialize({OP_MINUS:{writable:!1,value:"minus"},OP_PLUS:{writable:!1,value:"plus"},OP_MULTIPLY:{writable:!1,value:"multiply"},OP_DIVIDE:{writable:!1,value:"divide"},TYPE_COMPOUND:{writable:!1,value:"Compound"},TYPE_NUMBER:{writable:!1,value:"Number"},_lhs:{value:null},_rhs:{value:null},_operator:{value:null},_comment:{value:null},_type:{value:"Number"},lhs:{get:function(){return this._lhs},set:function(t){this._lhs!==t&&(this._lhs=t)}},rhs:{get:function(){return this._rhs},set:function(t){this._rhs!==t&&(this._rhs=t)}},operator:{get:function(){return this._operator},set:function(t){this._operator!==t&&(this._operator=t)}},result:{value:function(){var t;if(null==this.lhs)return"";if(this._type===this.TYPE_NUMBER){var s=""+this.lhs;return s.indexOf(".")==-1?parseInt(this.lhs,10):parseFloat(this.lhs)}if(this._type===this.TYPE_COMPOUND)switch(this.operator){case"plus":t=this.lhs+this.rhs;break;case"minus":t=this.lhs-this.rhs;break;case"divide":t=0!=this.rhs?this.lhs/this.rhs:"Error";break;case"multiply":t=this.lhs*this.rhs}return t}},comment:{get:function(){return this._comment},set:function(t){this._comment!==t&&(this._comment=t)}},build:{value:function(t){this._type==this.TYPE_NUMBER?(expression=new h,expression.lhs=t,this.lhs=t):this._type==this.TYPE_COMPOUND&&(this.rhs=t)}},addOperator:{value:function(t){this._type==this.TYPE_NUMBER?(this.operator=t,this._type=this.TYPE_COMPOUND):this._type==this.TYPE_COMPOUND&&(null==this.operator||null!=this.rhs?(this.lhs=this.clone(),this.operator=t,this.rhs=null):this.operator=t)}},clone:{value:function(){var t=new h;return this._type==this.TYPE_NUMBER?t.lhs=this.lhs:this._type==this.TYPE_COMPOUND&&(t._type=this._type,t.lhs=this.lhs.clone(),t.rhs=this.rhs,t.operator=this.operator),t}},prettyPrint:{value:function(t){var s;switch(t){case"plus":s="+";break;case"minus":s="-";break;case"divide":s="รท";break;case"multiply":s="ร"}return s}},toString:{value:function(){return null==this.lhs?"":this._type==this.TYPE_NUMBER?this.lhs.toString():this._type==this.TYPE_COMPOUND?this.lhs.toString()+" "+this.prettyPrint(this.operator)+" "+(null==this.rhs?"":this.rhs.toString()):void 0}},displayExpression:{get:function(){return this.toString()}},displayResult:{get:function(){return this.result()}}})}});